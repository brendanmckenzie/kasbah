stages:
    - build_ui
    - build
    - deploy

build:admin_ui:
    stage: build_ui
    image: node:6
    script:
        - npm install -g yarn
        - sh build-admin-ui.sh
    artifacts:
        paths:
        - src/Kasbah.Web.ContentManagement.UI/dist/

build:dotnet:
    stage: build
    image: microsoft/dotnet
    dependencies:
    - build:admin_ui
    script:
        - sh build-dotnet.sh
    artifacts:
        paths:
        - artifacts/

deploy:
    stage: deploy
    script:
        - sh deploy.sh
